<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="tickit_issue.form.filters.class">Tickit\Bundle\IssueBundle\Form\Type\FilterFormType</parameter>
        <parameter key="tickit_issue.form.issue.class">Tickit\Bundle\IssueBundle\Form\Type\IssueFormType</parameter>
        <parameter key="tickit_issue.form.issue_attachment.class">Tickit\Bundle\IssueBundle\Form\Type\IssueAttachmentFormType</parameter>
        <parameter key="tickit_issue.form.comment.class">Tickit\Bundle\IssueBundle\Form\Type\CommentFormType</parameter>
        <parameter key="tickit_issue.form.issue_data_transformer.class">Tickit\Component\Form\DataTransformer\EntityToEntityIdDataTransformer</parameter>
        <parameter key="tickit_issue.form.subscriber.comment_created_by.class">Tickit\Bundle\IssueBundle\Form\EventListener\CommentCreatedByFormSubscriber</parameter>
    </parameters>

    <services>

        <service id="tickit_issue.form.filters" class="%tickit_issue.form.filters.class%">
            <tag name="form.type" alias="tickit_issue_filters" />
        </service>

        <service id="tickit_issue.form.issue" class="%tickit_issue.form.issue.class%">
            <tag name="form.type" alias="tickit_issue" />
        </service>

        <service id="tickit_issue.form.issue_attachment" class="%tickit_issue.form.issue_attachment.class%">
            <tag name="form.type" alias="tickit_issue_attachment" />
        </service>

        <service id="tickit_issue.form.comment" class="%tickit_issue.form.comment.class%">
            <argument type="service" id="tickit_issue.form.issue_data_transformer" />
            <argument type="service" id="tickit_issue.form.subscriber.comment_created_by" />
            <tag name="form.type" alias="tickit_issue_comment" />
        </service>

        <service id="tickit_issue.form.issue_data_transformer" class="%tickit_issue.form.issue_data_transformer.class%">
            <argument type="service" id="doctrine.orm.entity_manager" />
            <argument>Tickit\Component\Model\Issue\Issue</argument>
            <argument>id</argument>
        </service>

        <service id="tickit_issue.form.subscriber.comment_created_by" class="%tickit_issue.form.subscriber.comment_created_by.class%">
            <argument type="service" id="security.context" />
        </service>

    </services>

</container>
